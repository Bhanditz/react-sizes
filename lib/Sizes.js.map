{"version":3,"sources":["../src/Sizes.js"],"names":["resizeListener","listeners","Sizes","mappedSizesToProps","WrappedComponent","state","id","propsToPass","dispatchSizes","forEach","callback","key","width","window","innerWidth","height","innerHeight","throttledWindowResize","parseMappedSizesToProps","map","check","reduce","acc","props","setState","addEventListener","length","removeEventListener","displayName","isMobile","isTablet","isDesktop","isGtMobile","sizes","isGtTablet","isStTablet","isStDesktop","isTabletAndGreater","isTabletAndSmaller"],"mappings":";;;;;;;;;;AAEA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;AAEA,IAAIA,uBAAJ;AACA,IAAMC,YAAY,EAAlB;;AAEA,IAAMC,QAAQ,SAARA,KAAQ;AAAA,oCAAIC,kBAAJ;AAAIA,sBAAJ;AAAA;;AAAA,SAA2B,UAACC,gBAAD,EAAsB;AAAA;;AAC7D;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA,0LAGEC,KAHF,GAGiB;AACbC,oBAAQ,eADK;AAEbC,uBAAa;AAFA,SAHjB,QAyBEC,aAzBF,GAyBkB,YAAM;AACpB,gCAAKP,SAAL,EAAgBQ,OAAhB,CAAwB,eAAO;AAC7B,gBAAMC,WAAWT,UAAUU,GAAV,CAAjB;;AAEA,gBAAI,OAAOD,QAAP,KAAoB,UAAxB,EAAoC;AAClCA,uBAAS;AACPE,uBAAOC,UAAUA,OAAOC,UADjB;AAEPC,wBAAQF,UAAUA,OAAOG;AAFlB,eAAT;AAID;AACF,WATD;AAUD,SApCH,QAsCEC,qBAtCF,GAuCI,sBAAS,MAAKT,aAAd,EAA6B,GAA7B,CAvCJ,QA0CEU,uBA1CF,GA0C4B,iBAA+B;AAAA,cAA5BN,KAA4B,SAA5BA,KAA4B;AAAA,cAArBG,MAAqB,SAArBA,MAAqB;;AACvD,cAAMR,cAAcJ,mBACjBgB,GADiB,CACb;AAAA,mBAASC,MAAM,EAAER,YAAF,EAASG,cAAT,EAAN,CAAT;AAAA,WADa,EAEjBM,MAFiB,CAEV,UAACC,GAAD,EAAMC,KAAN;AAAA,gCAAsBD,GAAtB,EAA8BC,KAA9B;AAAA,WAFU,EAE8B,EAF9B,CAApB;;AAIA,gBAAKC,QAAL,CAAc,EAAEjB,wBAAF,EAAd;AACD,SAhDH;AAAA;;AAAA;AAAA;AAAA,4CAQsB;AAClB,cAAI,CAACP,cAAL,EAAqB;AACnBA,6BAAiBa,OAAOY,gBAAP,CAAwB,QAAxB,EAAkC,KAAKR,qBAAvC,CAAjB;AACD;;AAEDhB,oBAAU,KAAKI,KAAL,CAAWC,EAArB,IAA2B,KAAKY,uBAAhC;AACA,eAAKV,aAAL;AACD;AAfH;AAAA;AAAA,+CAiByB;AACrB,iBAAOP,UAAU,KAAKI,KAAL,CAAWC,EAArB,CAAP;AACA,cAAI,sBAAKL,SAAL,EAAgByB,MAAhB,GAAyB,CAA7B,EAAgC;AAC9Bb,mBAAOc,mBAAP,CAA2B,QAA3B,EAAqC,KAAKV,qBAA1C;AACAjB,6BAAiB,IAAjB;AACD;AACF;AAvBH;AAAA;AAAA,iCAkDW;AACP,iBAAO,8BAAC,gBAAD,eAAsB,KAAKuB,KAA3B,EAAsC,KAAKlB,KAAL,CAAWE,WAAjD,EAAP;AACD;AApDH;;AAAA;AAAA,gCACSqB,WADT,cACgC,2BAAexB,gBAAf,CADhC;AAsDD,GAvDa;AAAA,CAAd;;AAyDAF,MAAM2B,QAAN,GAAiB;AAAA,MAAGjB,KAAH,SAAGA,KAAH;AAAA,SAAeA,QAAQ,GAAvB;AAAA,CAAjB;AACAV,MAAM4B,QAAN,GAAiB;AAAA,MAAGlB,KAAH,SAAGA,KAAH;AAAA,SAAeA,SAAS,GAAT,IAAgBA,QAAQ,IAAvC;AAAA,CAAjB;AACAV,MAAM6B,SAAN,GAAkB;AAAA,MAAGnB,KAAH,SAAGA,KAAH;AAAA,SAAeA,SAAS,IAAxB;AAAA,CAAlB;;AAEAV,MAAM8B,UAAN,GAAmB,UAACC,KAAD;AAAA,SAAW,CAAC/B,MAAM2B,QAAN,CAAeI,KAAf,CAAZ;AAAA,CAAnB;AACA/B,MAAMgC,UAAN,GAAmB,UAACD,KAAD;AAAA,SAAW/B,MAAM6B,SAAN,CAAgBE,KAAhB,CAAX;AAAA,CAAnB;;AAEA/B,MAAMiC,UAAN,GAAmB,UAACF,KAAD;AAAA,SAAW/B,MAAM2B,QAAN,CAAeI,KAAf,CAAX;AAAA,CAAnB;AACA/B,MAAMkC,WAAN,GAAoB,UAACH,KAAD;AAAA,SAAW,CAAC/B,MAAMkC,WAAN,CAAkBH,KAAlB,CAAZ;AAAA,CAApB;;AAEA/B,MAAMmC,kBAAN,GAA2B,UAACJ,KAAD;AAAA,SAAW,CAAC/B,MAAM2B,QAAN,CAAeI,KAAf,CAAZ;AAAA,CAA3B;AACA/B,MAAMoC,kBAAN,GAA2B,UAACL,KAAD;AAAA,SAAW,CAAC/B,MAAMkC,WAAN,CAAkBH,KAAlB,CAAZ;AAAA,CAA3B;;kBAEe/B,K","file":"Sizes.js","sourcesContent":["// @flow\n\nimport React, { Component } from 'react';\nimport { v4 } from 'uuid';\nimport keys from 'lodash.keys';\nimport throttle from 'lodash.throttle';\n\nimport { getDisplayName } from './utils';\n\nlet resizeListener;\nconst listeners = {};\n\nconst Sizes = (...mappedSizesToProps) => (WrappedComponent) => {\n  return class extends Component {\n    static displayName = `Sizes(${getDisplayName(WrappedComponent)})`;\n\n    state: State = {\n      id: `A${v4()}`,\n      propsToPass: {},\n    };\n\n    componentDidMount() {\n      if (!resizeListener) {\n        resizeListener = window.addEventListener('resize', this.throttledWindowResize);\n      }\n\n      listeners[this.state.id] = this.parseMappedSizesToProps;\n      this.dispatchSizes();\n    }\n\n    componentWillUnmount() {\n      delete listeners[this.state.id];\n      if (keys(listeners).length < 1) {\n        window.removeEventListener('resize', this.throttledWindowResize);\n        resizeListener = null;\n      }\n    }\n\n    dispatchSizes = () => {\n      keys(listeners).forEach(key => {\n        const callback = listeners[key];\n\n        if (typeof callback === 'function') {\n          callback({\n            width: window && window.innerWidth,\n            height: window && window.innerHeight,\n          });\n        }\n      });\n    };\n\n    throttledWindowResize = (\n      throttle(this.dispatchSizes, 200)\n    );\n\n    parseMappedSizesToProps = ({ width, height }: Object) => {\n      const propsToPass = mappedSizesToProps\n        .map(check => check({ width, height }))\n        .reduce((acc, props) => ({ ...acc, ...props }), {});\n\n      this.setState({ propsToPass });\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} {...this.state.propsToPass} />;\n    }\n  };\n};\n\nSizes.isMobile = ({ width }) => width < 480;\nSizes.isTablet = ({ width }) => width >= 480 && width < 1024;\nSizes.isDesktop = ({ width }) => width >= 1024;\n\nSizes.isGtMobile = (sizes) => !Sizes.isMobile(sizes);\nSizes.isGtTablet = (sizes) => Sizes.isDesktop(sizes);\n\nSizes.isStTablet = (sizes) => Sizes.isMobile(sizes);\nSizes.isStDesktop = (sizes) => !Sizes.isStDesktop(sizes);\n\nSizes.isTabletAndGreater = (sizes) => !Sizes.isMobile(sizes);\nSizes.isTabletAndSmaller = (sizes) => !Sizes.isStDesktop(sizes);\n\nexport default Sizes;\n"]}